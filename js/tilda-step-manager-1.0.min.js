function t_quiz__step_manager(t){void 0===t&&(t={steps:[],activeStepClass:""});var n=t.steps,e=t.activeStepClass||"t-step-form__step_active",i=t.hiddenStepClass||"t-quiz-hidden",a=t.animation,o=t.enableConditionals,r=t.enableAutoStepChange,s=!1,u,c=300,l={index:-1,step:null};function p(t){t.element.classList.add(e),t.element.classList.remove(i)}function d(t){t.element.classList.remove(e),t.element.classList.add(i)}function f(t){var n=t.element.querySelectorAll(".t-quiz__step__input"),e=n.length&&Array.from(n).every((function(t){return t_quiz__isElementHidden(t)}));return t_quiz__isElementHidden(t.element)||e}function m(){var t=n.findIndex((function(t,n){return n>l.index&&!f(t)})),e=Math.min(n.length,t);return{index:e,step:n[e]}}function v(){for(var t=l.index,e=-1===t?n.length-1:t-1,i=e;i>=0;i--){var a;if(!f(n[i])){e=i;break}}var o=Math.max(0,e);return{index:o,step:n[o]}}function _(t){return n.filter((function(n){return-1!==t.indexOf(n.type)&&!f(n)}))}function g(){var t=_(["step","contacts"]),n=t.indexOf(l.step);return{total:t.length,current:-1===n?null:n+1}}function h(n,e,i){var a=l.step,o;if(t.checkIfCanChangeStep&&!t.checkIfCanChangeStep(n,y(),i))return;var r="next"===n?m():v();l=r;var s=y();return E(a,r.step,e),s}function S(){return n.filter((function(t){return!f(t)||t===l.step}))}function C(){var t=S(),n=t.indexOf(l.step),e,i;return t.splice(n+1).every((function(t){return"step"!==t.type&&"contacts"!==t.type}))}function A(){var t=S(),n=t.indexOf(l.step),e;return 0===t.splice(0,n).length}function y(){var t,n;return{type:null==(t=l.step)?void 0:t.type,index:l.index,isFirst:A(),isLast:C(),step:l.step}}function x(){var t=["ri","rd","rs","sb","cb"],e;n.filter((function(n){var e=n.element,i;if(!e.querySelector(".t-quiz__inputs-wrapper")){var a=e.querySelector(".t-input-group");if(a){var o=t.includes(a.getAttribute("data-field-type")),r="cb"===a.getAttribute("data-field-radcb");return o&&!r}}})).forEach((function(t){var n;Array.from(t.element.querySelectorAll(".t-input-group")).forEach((function(t){t.addEventListener("change",(function(t){var n;t.target.classList.contains("t-radio-ownanswer")||t.target.classList.contains("t-input-ownanswer")||L()}))}))}))}function L(){s||(s=!0,u=setTimeout((function(){h("next",{},{isAutoTransition:!0})}),c))}function w(){r&&(clearTimeout(u),s=!1)}function E(n,o,r){void 0===r&&(r={});var s=t,u=s.onStepChange,c=s.onProgressChange,l=a.callbacks||{},f=l.onAnimationComplete,m=l.onAnimationStart,v=l.onNewStepAnimationStart;if(!a)return n&&d(n),p(o),u&&u(o),c&&c(g()),f&&f(n,o),r.onAnimationComplete&&r.onAnimationComplete(n,o),void w();t_quiz__animateSteps(n,o,{onAnimationStart:function t(n,e){m&&m(n,e),r.onAnimationStart&&r.onAnimationStart(n,e)},onNewStepAnimationStart:function t(n,e){v&&v(n,e),r.onNewStepAnimationStart&&r.onNewStepAnimationStart(n,e),u&&u(e),c&&c(g()),w()},onAnimationComplete:function t(n,e){f&&f(n,e),r.onAnimationComplete&&r.onAnimationComplete(n,e)}},{animation:{in:b(o),out:b(n)},stepActiveClass:e,stepHiddenClass:i})}function b(t){return t&&"string"!=typeof a?a.type[t.type]||"fade-with-move":a}function q(){o?t_onFuncLoad("t_form__conditionals_initFields",(function(){var n=t_form__conditionals_initFields(t.recId);n.addListeners((function(){t.onProgressChange&&t.onProgressChange(g())})),n.addStateChangeListeners((function(n){t.onConditionalStateChange&&t.onConditionalStateChange(n)})),r&&x(),h("next",{onAnimationComplete:t.onInit})})):(r&&x(),h("next",{onAnimationComplete:t.onInit}))}return{go:h,init:q,getStepsProgress:g,getCurrentStepInfo:y}}function t_quiz__animateSteps(t,n,e,i){var a=700,o=400,r="forwards",s="ease-in-out",u=i||{},c=u.animation,l=void 0===c?{in:"fade-with-move",out:"fade-with-move"}:c,p=u.stepActiveClass,d=u.stepHiddenClass,f=function t(){},m=e||{},v=m.onAnimationComplete,_=void 0===v?f:v,g=m.onAnimationStart,h=void 0===g?f:g,S=m.onNewStepAnimationStart,C=void 0===S?f:S,A;if(!!!document.body.animate)return h(t,n),t&&t.element.classList.remove(p),t&&t.element.classList.add(d),C(t,n),n&&n.element.classList.add(p),n&&n.element.classList.remove(d),void _(t,n);function y(t){var n=t.animate([{opacity:0,pointerEvents:"none"},{opacity:1,pointerEvents:"auto"}],{duration:a,fill:r,easing:s});return n.pause(),n}function x(t){var n=t.animate([{transform:"translateY(15px)",opacity:0,pointerEvents:"none"},{transform:"translateY(0px)",opacity:1,pointerEvents:"auto"}],{duration:a,fill:r,easing:s});return n.pause(),n}function L(t){var n=t.animate([{opacity:1,pointerEvents:"none"},{opacity:0,pointerEvents:"auto"}],{duration:o,fill:r,easing:s});return n.pause(),n}function w(t){var n=t.animate([{transform:"translateY(0)",opacity:1,pointerEvents:"none"},{transform:"translateY(20px)",opacity:0,pointerEvents:"auto"}],{duration:o,fill:r,easing:s});return n.pause(),n}function E(){_(t,n)}function b(){t.element.classList.remove(p),t.element.classList.add(d),q()}function q(){if(!n)return C(t,n),void E();var e;(e="fade-with-move"===l.in?x(n.element):y(n.element)).finished.then(E),n.element.classList.remove(d),n.element.classList.add(p),e.play(),C(t,n)}function z(){var n;(n="fade-with-move"===l.out?w(t.element):L(t.element)).finished.then(b),n.play()}return h(t,n),t?z():q()}function t_quiz__isElementHidden(t){return"true"===t.getAttribute("data-hidden-by-condition")||t.classList.contains("t-form__hidden")}
